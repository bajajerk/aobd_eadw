<html>
<body>

	<nav>
	<div>
		<input type="text" id="search" onkeyup="search()">
	</div>
	</nav>
	<div id="suggestions"></div>
	<div id="result"></div>
	
	<script>
		function search(){
			var input = document.getElementById("search");
			var result = document.getElementById("result");
			var suggestions = document.getElementById("suggestions");			
			var xhr=new XMLHttpRequest();
			
			xhr.onreadystatechange=function(){
			  if (xhr.readyState==4 && xhr.status==200){
				  	var json = JSON.parse(xhr.responseText);
				  	html = "";
				  	if (json.r.length==0){
					  	html += "<article>";
				  		html += "<h1 style='color:#bbbbbb'>No results for this query</h1>";
					  	html += "</article>";				  		
				  	}
				  	else {				  	
					  	for(var i= 0; i < json.r.length; ++i){
						  	html += "<article>";
						  	html += "<h1>"+json.r[i].t+"</h1>";
						  	html += "<p>Published: <time>"+json.r[i].p+"</time></p>";
						  	var description = json.r[i].d;
						  	
						  	html += description;
						  	html += "<p><a href='"+json.r[i].l+"'>read more</a></p>";
								var entities = "";				
								obj = JSON.parse(json.r[i].e);
								
						  	for (var key in  obj){
						  			entities += "<a class='tag' href='"+obj[key] +"'>"+ key+ "</a>";
						  	}				
						  	html += "<p><b>Entities:</b>"+entities+"</p>";
						  	html += "</article>";				  		
					  	}
				  	}
				  	suggestions.innerHTML="did you said? "+ json.s;
				  	result.innerHTML=html;
			    }
			  }
			xhr.open("GET","/search?s="+input.value,true);
			xhr.send();
		}
		search();

		</script>
</body>

<style>
	body{
		margin: 0px;
		padding-top:32px;
	}
	
	article{
		background: #EEEEEE;
		margin: 16px auto;
		width:800px;
		padding:16px;
	}
	
	.tag {
		margin:2px;
		padding: 2px;
    border: 1px solid;
    border-color: black;
    border-radius: 2px;
    background-color: white;
	}

	nav {
	  text-align: center;
	
		margin:0px;
		background: #333333;
		width: 100%;
		top: 0px;
		position: fixed;
		display: inline-block;
	}
	
	nav div {
			display:block;
			margin: 4px auto;
	} 
</style>
</html>